<!DOCTYPE html>
<html lang="en">
<head>
 
    <script src = "spel-programmering-template/simple.js"></script>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS Game</title>
 
</head>
<body>
  
    <progress id="health" value="100" max="500"></progress>
    <style>
        

    
        body{ background-color: lightblue};    
        progress::-moz-progress-bar{background: green;}
        progress{background: green;
            width: 30em;
            height: 2em;
        }
        
        

    
    </style>

    <script>
        //Getting health info
let health = document.getElementById("health")
health.value = 500;

//For the bullets
let activeBullet = false;
let bulletx = 0;
let bullety = 0;    

const bullets1 = [];
const bullets2 = [];
const bulletxx = [];
const bulletyy = [];
//player cords
var p1 = {x: 100, y: 360, speed: 10}

//enemies
var enemy = {x: 400, y:1630, speed: 4}
const enemies = [];
 

function update()
{
    clearScreen();


    circle(enemy.y, enemy.x, 10, "black")
    if (enemy.y > 0){
        enemy.y -= 4;

        enemies.push([enemy.x, enemy.y]);
        if (enemy.y <= 0){
            health.value -= 10
        }
        
    }
    //TEST*****
    if (keyboard.g){
        health.value -= 10;
    }
    if (keyboard.h){
        health.value += 10;
    }
    //TEST****
    //Some controls for the plane and the plane picture
    
    picture(p1.x, p1.y, "bilder/Plane 1.png")
    if (keyboard.w){p1.y -= p1.speed}
    if (keyboard.s){p1.y += p1.speed}
    if (keyboard.a){p1.x -= p1.speed}
    if (keyboard.d){p1.x += p1.speed}
    
    //Bullets
    if (keyboard.space){
        activeBullet = true;
        bulletx = p1.x;
        bullety = p1.y;

        bullets1.push([bulletx, bullety]);
        bullets2.push([bulletx, bullety]);
    }

    if(activeBullet == true){
        for(let i = 0; i < bullets1.length; i++){
            bullets1[i][0]+= 40;
            bullets1[i][1]+=0;

            bullets2[i][0]+= 40;
            bullets2[i][1]+=0;

            if (bullets1.length > 100){
                bullets1.shift();
                bullets2.shift();
                bulletxx.shift();
                bulletyy.shift();
            }   
            circle(bullets1[i][0] + 58, bullets1[i][1] +48, 2, "black");
            circle(bullets2[i][0] + 58 , bullets2[i][1] + 92, 2, "black");
            bulletxx.push([bullets1[i][0]])
            bulletyy.push([bullets1[i][1]]) 
        }
    }

    //Enemies
    
    
    
    



    //ending
    if (health.value <= 0){
        alert("Game Over!")
        
        
    }
}


    </script>
    

</body>
</html>